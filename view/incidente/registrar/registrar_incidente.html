<div class="nav-tabs-custom">
    <ul class="nav nav-tabs">
        <li id="id-tab-1" class="imeco-tab" ng-class="{'active': tab.tab1 == true}">
            PASO 1
        </li>
        <li id="id-tab-2" class="imeco-tab" ng-class="{'active': tab.tab2 == true}">
            PASO 2
        </li>
        <li id="id-tab-3" class="imeco-tab" ng-class="{'active': tab.tab3 == true}">
            PASO 3
        </li>
    </ul>

    <div class="tab-content" style="overflow:hidden">
        <!--PASO 1-->
        <div class="tab-pane" ng-class="{'active': tab.tab1 == true}">
            <div class="box box-danger">
                <div class="box-header">
                    <h3 class="box-title">Datos del Incidente</h3>
                </div>
                <div class="box-body">
                    <form class="form-horizontal" name="nameForm1" enctype="multipart/form-data"
                          ng-submit="registrar()">
                        <div class="form-group">
                            <label class="col-xs-2 control-label">Tienda<span class="imeco-required">*</span></label>

                            <div class="col-xs-10">
                                <select class="form-control" ng-model="incidente.tienda" required
                                        ng-options="ti.nombreTienda for ti in tiendas track by ti.idTienda">
                                    <option value="">-Seleccione-</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-2 control-label">Dni Involucrado<span class="imeco-required">*</span></label>
                            <div class="col-xs-10">
                                <input type="text" required ng-model="incidente.dniInvolucrado" ng-blur="buscarNombreInvolucrado()"
                                       ng-minlength="8" ng-pattern="/^[0-9]+$/" maxlength="15"
                                       class="form-control" placeholder="Dni Involucrado">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-2 control-label">Nombre Involucrado<span class="imeco-required">*</span></label>
                            <div class="col-xs-10">
                                <input type="text" required ng-model="incidente.nombreInvolucrado"
                                       class="form-control" placeholder="Nombre del Involucrado">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-2 control-label">Acto Condicion Insegura</label>
                            <div class="col-xs-10">
                                <textarea class="form-control text-res" rows="5"
                                          maxlength="500" ng-trim='false'
                                          ng-model="incidente.actoCondicionInsegura"
                                          style="resize: none">
                                </textarea>
                                <span class="label label-info">
                                    {{500 - incidente.actoCondicionInsegura.length}}
                                    Caracteres Restantes
                                </span>
                            </div>
                        </div>


                        <div class="form-group">
                            <label class="col-xs-2 control-label">Dni Accidentado</label>
                            <div class="col-xs-10">
                                <input type="text" ng-model="incidente.dniAccidentado"
                                       ng-minlength="8" ng-pattern="/^[0-9]+$/" maxlength="15"
                                       class="form-control" placeholder="Dni Accidentado">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-2 control-label">Nombre Accidentado</label>
                            <div class="col-xs-10">
                                <input type="text" ng-model="incidente.nombreAccidentado"
                                       class="form-control" placeholder="Nombre del Accidentado">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-2 control-label">Edad Accidentado<span class="imeco-required">*</span></label>
                            <div class="col-xs-10">
                                <input type="number" required ng-model="incidente.edadAccidentado"
                                       class="form-control" min="0">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-2 control-label">Sexo Accidentado</label>
                            <div class="col-xs-10">
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="sexo" value="M" ng-model="incidente.sexoAccidentado">
                                        Masculino
                                    </label>
                                    <label style="margin-left: 1em">
                                        <input type="radio" name="sexo" value="F" ng-model="incidente.sexoAccidentado">
                                        Femenino
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-2 control-label">Fecha Inc<span class="imeco-required">*</span></label>
                            <div class="col-xs-10">
                                <input type="datetime-local" ng-model="incidente.fechaAccidenteCompleta"
                                       class="form-control">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-2 control-label">Nivel Gravedad<span class="imeco-required">*</span></label>
                            <div class="col-xs-10">
                                <select ng-model="incidente.nivelGravedad" class="form-control">
                                    <option value="ALTO">ALTO</option>
                                    <option value="MODERADO">MODERADO</option>
                                    <option value="BAJO">BAJO</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-2 control-label">Diagnostico</label>
                            <div class="col-xs-10">
                                <textarea class="form-control text-res" rows="5"
                                          maxlength="500" ng-trim='false'
                                          ng-model="incidente.diagnostico"
                                          style="resize: none">
                                </textarea>
                                <span class="label label-info">
                                    {{500 - incidente.diagnostico.length}}
                                    Caracteres Restantes
                                </span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-2 control-label">Descanso Medico</label>
                            <div class="col-xs-10">
                                <select ng-model="incidente.descansoMedico" class="form-control">
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-2 control-label">Cantidad Dias</label>
                            <div class="col-xs-10">
                                <input type="number" required ng-model="incidente.cantidadDias"
                                       class="form-control" min="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-2 control-label">Descripcion Causas</label>
                            <div class="col-xs-10">
                                <textarea class="form-control text-res" rows="5"
                                          maxlength="500" ng-trim='false'
                                          ng-model="incidente.descripcionCausas"
                                          style="resize: none">
                                </textarea>
                                <span class="label label-info">
                                    {{500 - incidente.descripcionCausas.length}}
                                    Caracteres Restantes
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-2 control-label">Lesion:</label>
                            <div class="col-xs-10">
                                <select ng-model="incidente.lesion" class="form-control">
                                    <option value="INCAPACIDAD TEMPORAL">INCAPACIDAD TEMPORAL</option>
                                    <option value="INCAPACIDAD PERMANENTE">INCAPACIDAD PERMANENTE</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-2 control-label">Acciones Correctivas Realizadas:</label>
                            <div class="col-xs-10">
                                <textarea class="form-control text-res" rows="5"
                                          maxlength="500" ng-trim='false'
                                          ng-model="incidente.accionesCorrectivasRealizadas"
                                          style="resize: none">
                                </textarea>
                                <span class="label label-info">
                                    {{500 - incidente.accionesCorrectivasRealizadas.length}}
                                    Caracteres Restantes
                                </span>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <button class="pull-right btn btn-danger" ng-click="irPaso2()"
                    ng-disabled="!(nameForm1.$valid)">Siguiente
            </button>
        </div>
        <!-- FIN PASO 1 -->


        <!-- PASO 2 -->
        <div class="tab-pane" ng-class="{'active': tab.tab2 == true}">

            <div class="box box-danger">
                <div class="box-header">
                    <h3 class="box-title">Ingrese Materiales Dañados</h3>
                </div>
                <div class="box-body">
                    <form class="form-horizontal" name="nameFormProducto">
                        <div class="form-group">
                            <label class="col-md-2 control-label">Código</label>
                            <div class="col-md-4">
                                <input type="text" class="form-control" ng-model="producto.codigo"
                                       required maxlength="30"
                                       placeholder="Código del Producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2 control-label">Descripción</label>
                            <div class="col-md-4">
                                <input type="text" class="form-control" required
                                       ng-model="producto.descripcion" maxlength="100"
                                       placeholder="Descripción del Producto">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-2 control-label">Marca</label>
                            <div class="col-md-5">
                                <input type="text" class="form-control" maxlength="50"
                                       ng-model="producto.marca" placeholder="Marca del Producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2 control-label">Cantidad</label>
                            <div class="col-md-3">
                                <input type="text"
                                       ng-pattern="/^(\d)+$/"
                                       class="form-control"
                                       ng-model="producto.cantidad" required="true" min="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2 control-label">Precio</label>
                            <div class="col-md-3">
                                <input type="number" step="0.01"
                                       ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/"
                                       class="form-control" ng-model="producto.precio" required min="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2 control-label">Es Activo de la Empresa?</label>
                            <div class="col-md-3">
                                <select ng-model="producto.esActivo" class="form-control">
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            <div class="col-md-7">
                                <button class="btn btn-primary pull-right"
                                        ng-click="addProduct()" ng-disabled="!nameFormProducto.$valid"
                                        title="Agrege Producto a la Lista">Agregar
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <div class="box box-primary">
                <div class="box-header">
                    <h3 class="box-title">Materiales Dañados</h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body table-responsive">
                    <div class="col-xs-12">
                        <table id="id-table-intervenciones" class="table table-bordered table-striped">
                            <thead>
                            <tr>
                                <th>Es Activo?</th>
                                <th>Código</th>
                                <th>Descripción</th>
                                <th>Marca</th>
                                <th style="text-align: right">Cantidad</th>
                                <th style="text-align: right">Precio</th>
                                <th style="text-align: center">Acción</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="pro in productos">
                                <td>
                                    <label class="label"
                                           ng-class="{'label-success': pro.esActivo == 'SI' , 'label-danger': pro.esActivo == 'NO'}">{{pro.esActivo}}</label>
                                </td>
                                <td>{{pro.codigo}}</td>
                                <td>{{pro.descripcion}}</td>
                                <td>{{pro.marca}}</td>
                                <td style="text-align: right">{{pro.cantidad}}</td>
                                <td style="text-align: right">{{pro.precio | currency:'S/. '}}</td>
                                <td style="text-align: center">
                                    <button class="btn btn-danger btn-xs" ng-click="removeProduct($index)">Quitar
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div>
                            <div class="pull-right">
                                <strong>Total:</strong>
                                <label style="font-size: 1em" class="label label-info">{{incidente.total |
                                    currency:'S/. '}}</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <button class="pull-left btn btn-danger" ng-click="irPaso1()">Atrás</button>
                <button class="pull-right btn btn-danger" ng-click="irPaso3()">Siguiente</button>
            </div>

        </div>
        <!--FIN PASO 2-->

        <!--PASO 3 PASO 3 PASO 3 PASO 3-->
        <div class="tab-pane" ng-class="{'active': tab.tab3 == true}">
            <div class="row">
                <div class="col-sm-7">
                    <form name="modelito" class="form-horizontal" enctype="multipart/form-data">
                        <div class="col-sm-7">
                            <div class="form-group">
                                <div>
                                    <label>Adjuntar Imagen</label>
                                </div>
                                <img ng-src="{{image}}" width="300px" height="300px" class="img-rounded">
                            </div>
                            <div class="form-group">
                                <input my-upload type="file" ng-model="document" file-model="myFile" valid-file
                                       required>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <div>
                <button ng-click="irPaso2()" class="pull-left btn btn-danger">Atrás</button>
                <button ng-click="SaveAll()" ng-disabled="!(modelito.$valid && !isUpload)"
                        class="pull-right btn btn-primary btn-lg">
                    Registrar Incidente
                </button>
            </div>
        </div>
        <!--FIN PASO 3-->
    </div>
</div>